<%- include('./components/header.html') %>
<div id="content">
    <div id="pack" class="editing">
        <div id="questions">
            <div id="question-list">
                <div id="question-header">
                    <h2>Questions</h2>
                    <p id="question-num"><span><%= pack.questions.length %> question<%= pack.questions.length == 1 ? "" : "s" %></span> in this pack</p>
                </div>
                <div id="btns">
                    <div id="add-question" class="btn secondary bold">
                        <span class="bg"></span>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                            <path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"/>
                        </svg>
                        <span>Add Question</span>
                    </div>
                    <div id="magicreate-button" class="btn primary bold">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                            <path d="M234.7 42.7L197 56.8c-3 1.1-5 4-5 7.2s2 6.1 5 7.2l37.7 14.1L248.8 123c1.1 3 4 5 7.2 5s6.1-2 7.2-5l14.1-37.7L315 71.2c3-1.1 5-4 5-7.2s-2-6.1-5-7.2L277.3 42.7 263.2 5c-1.1-3-4-5-7.2-5s-6.1 2-7.2 5L234.7 42.7zM46.1 395.4c-18.7 18.7-18.7 49.1 0 67.9l34.6 34.6c18.7 18.7 49.1 18.7 67.9 0L529.9 116.5c18.7-18.7 18.7-49.1 0-67.9L495.3 14.1c-18.7-18.7-49.1-18.7-67.9 0L46.1 395.4zM484.6 82.6l-105 105-23.3-23.3 105-105 23.3 23.3zM7.5 117.2C3 118.9 0 123.2 0 128s3 9.1 7.5 10.8L64 160l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L128 160l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L128 96 106.8 39.5C105.1 35 100.8 32 96 32s-9.1 3-10.8 7.5L64 96 7.5 117.2zm352 256c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L416 416l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L480 416l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L480 352l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L416 352l-56.5 21.2z"/>
                        </svg>
                        <span>Magicreate&trade;</span>
                    </div>
                    <div id="divider"></div>
                    <a class="btn pushable bold success" href="/host/<%= pack.id %>">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                            <path d="M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c-7.6 4.2-12.3 12.3-12.3 20.9V344c0 8.7 4.7 16.7 12.3 20.9s16.8 4.1 24.3-.5l144-88c7.1-4.4 11.5-12.1 11.5-20.5s-4.4-16.1-11.5-20.5l-144-88c-7.4-4.5-16.7-4.7-24.3-.5z"/>
                        </svg>
                        <span>Start Game</span>
                    </a>
                </div>
                <form id="question-popup" class="popup">
                    <h1><span id="task">New</span> Question</h1>
                    <label for="type">Type:</label>
                    <select id="type" name="type">
                        <option value="multiple">Multiple Choice</option>
                        <option value="tof">True or False</option>
                    </select>
                    <input id="question" type="text" placeholder="Question..." required />
                    <div id="divider" class="h"></div>
                    <div id="true-or-false">
                        <div id="input">
                            <input type="checkbox" name="tof-a" id="tof-a" checked />
                            <label for="tof-a"></label>
                        </div>
                    </div>
                    <div id="multiple-choice" class="active">
                        <div id="input">
                            <input type="text" placeholder="Answer Choice 1" id="a1" class="answer" />
                            <input type="checkbox" name="c1" id="c1" checked />
                            <label for="c1"></label>
                        </div>
                        <div id="input">
                            <input type="text" placeholder="Answer Choice 2" id="a2" class="answer" />
                            <input type="checkbox" name="c2" id="c2" />
                            <label for="c2"></label>
                        </div>
                        <div id="input">
                            <input type="text" placeholder="Answer Choice 3" id="a3" class="answer" />
                            <input type="checkbox" name="c3" id="c3" />
                            <label for="c3"></label>
                        </div>
                        <div id="input">
                            <input type="text" placeholder="Answer Choice 4" id="a4" class="answer" />
                            <input type="checkbox" name="c4" id="c4" />
                            <label for="c4"></label>
                        </div>
                    </div>
                    <div class="error"></div>
                    <div class="btns">
                        <div id="cancel" class="btn bg">
                            <span>Cancel</span>
                        </div>
                        <button type="submit" class="btn primary bold">
                            <span id="task">Add</span>
                        </button>
                    </div>
                </form>
                <form id="magicreate-popup" class="popup">
                    <h1>Magicreate&trade;</h1>
                    <p id="slogan">Making question creation <span class="showy warm">EASIER</span>!</p>
                    <label for="topic">Topic (What should the questions be about?):</label>
                    <input id="topic" type="text" placeholder="Topic..." maxlength="50" required />
                    <div>
                        <label for="numQuestions"># questions to create (may be inaccurate):</label>
                        <input id="numQuestions" type="number" placeholder="1-20" min="1" max="20" value="1" required />
                    </div>
                    <div>
                        <label for="numAnswers"># answers per question:</label>
                        <input id="numAnswers" type="number" placeholder="2-4" min="2" max="4" value="4" required />
                    </div>
                    <label for="difficulty">Question Difficulty:</label>
                    <select id="difficulty" name="difficulty" required>
                        <option value="extremely easy">Extremely Easy</option>
                        <option value="easy">Easy</option>
                        <option value="medium" selected>Medium</option>
                        <option value="hard">Hard</option>
                        <option value="extremely hard">Extremely Hard</option>
                    </select>
                    <label for="type">Question Type:</label>
                    <select id="type" name="type" required>
                        <option value="multiple">Multiple Choice</option>
                        <option value="tof">True or False</option>
                    </select>
                    <div class="error"></div>
                    <div class="btns">
                        <em>Content generated with AI may be inaccurate or misleading</em>
                        <div id="cancel" class="btn bg">
                            <span>Cancel</span>
                        </div>
                        <button id="generate-questions" type="submit" class="btn primary bold">
                            <span>Generate</span>
                            <svg class="spinner">
                                <circle>
                                    <animateTransform attributeName="transform" type="rotate" values="-90; 810" keyTimes="0; 1" dur="2s" repeatCount="indefinite"></animateTransform>
                                    <animate attributeName="stroke-dashoffset" values="0%; 0%; -157.080%" calcMode="spline" keySplines="0.61, 1, 0.88, 1; 0.12, 0, 0.39, 0" keyTimes="0; 0.5; 1" dur="2s" repeatCount="indefinite"></animate>
                                    <animate attributeName="stroke-dasharray" values="0% 314.159%; 157.080% 157.080%; 0% 314.159%" calcMode="spline" keySplines="0.61, 1, 0.88, 1; 0.12, 0, 0.39, 0" keyTimes="0; 0.5; 1" dur="2s" repeatCount="indefinite"></animate>
                                </circle>
                            </svg>
                        </button>
                    </div>
                </form>
                <div id="question-container">
                    <% for (let i = 0; i < pack.questions.length; i++) { %>
                        <div class="question" data-id="<%= pack.questions[i].id %>" data-type="<%= pack.questions[i].type %>">
                            <div class="btn bold">
                                <span>Edit Question</span>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                                    <path d="M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V299.6l-94.7 94.7c-8.2 8.2-14 18.5-16.8 29.7l-15 60.1c-2.3 9.4-1.8 19 1.4 27.8H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128zM549.8 235.7l14.4 14.4c15.6 15.6 15.6 40.9 0 56.6l-29.4 29.4-71-71 29.4-29.4c15.6-15.6 40.9-15.6 56.6 0zM311.9 417L441.1 287.8l71 71L382.9 487.9c-4.1 4.1-9.2 7-14.9 8.4l-60.1 15c-5.5 1.4-11.2-.2-15.2-4.2s-5.6-9.7-4.2-15.2l15-60.1c1.4-5.6 4.3-10.8 8.4-14.9z"/>
                                </svg>
                            </div>
                            <div class="btn delete bold">
                                <span>Delete Question</span>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
                                    <path d="M376.6 84.5c11.3-13.6 9.5-33.8-4.1-45.1s-33.8-9.5-45.1 4.1L192 206 56.6 43.5C45.3 29.9 25.1 28.1 11.5 39.4S-3.9 70.9 7.4 84.5L150.3 256 7.4 427.5c-11.3 13.6-9.5 33.8 4.1 45.1s33.8 9.5 45.1-4.1L192 306 327.4 468.5c11.3 13.6 31.5 15.4 45.1 4.1s15.4-31.5 4.1-45.1L233.7 256 376.6 84.5z"/>
                                </svg>
                            </div>
                            <h3><%= i + 1 %>) <%= pack.questions[i].question %></h3>
                            <div class="answers">
                                <% pack.questions[i].answer_choices.forEach((choice) => { %>
                                    <div class="answer" data-correct="<%= pack.questions[i].answers.includes(choice) %>">
                                        <span><%= choice %></span>
                                    </div>
                                <% }) %>
                            </div>
                        </div>
                    <% } %>
                </div>
            </div>
        </div>
    </div>
</div>